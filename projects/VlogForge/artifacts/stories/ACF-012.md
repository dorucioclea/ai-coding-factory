# ACF-012: Real-Time Messaging

**Status**: Ready
**Priority**: P1 - Must Have (MVP)
**Epic**: Collaboration
**Estimate**: L

## User Story

As a **creator**, I want to **message other creators** so that **we can discuss collaborations in real-time**.

## Acceptance Criteria

### AC1: Start Conversation
- **Given** mutual collaboration interest (accepted request or team membership)
- **When** a creator initiates a message
- **Then** a conversation thread is created

### AC2: Send Messages
- **Given** an active conversation
- **When** a creator sends a message
- **Then** it appears instantly for both participants (real-time)

### AC3: Message Notifications
- **Given** a user receives a message
- **When** they are not in the conversation view
- **Then** they receive in-app notification with badge count

### AC4: Conversation List
- **Given** a creator with multiple conversations
- **When** they view the messages page
- **Then** they see all conversations sorted by most recent, with unread indicator

### AC5: Message History
- **Given** a conversation with history
- **When** a user scrolls up
- **Then** older messages load with infinite scroll (50 per page)

### AC6: Typing Indicator
- **Given** an open conversation
- **When** the other participant is typing
- **Then** a "typing..." indicator is shown

## Technical Notes

- Use SignalR for real-time WebSocket communication
- Store messages in PostgreSQL with conversation_id index
- Implement message read receipts
- Rate limit: max 60 messages per minute per user

## Dependencies

- ACF-001 (Authentication)
- ACF-011 (Collaboration Requests)

## Test Requirements

- Unit tests for message validation
- Integration tests for SignalR hub
- E2E tests for real-time messaging

## Traceability

- Tests: `VlogForge.UnitTests/Application/MessagingServiceTests.cs`
- API: `GET /api/conversations`, `GET /api/conversations/{id}/messages`, `POST /api/conversations/{id}/messages`
- SignalR Hub: `/hubs/messaging`
