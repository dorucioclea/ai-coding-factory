// React Hook Form + Zod Template
// Story: {{StoryId}}
// Generated by Claude Code

import { FC } from 'react';
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { z } from 'zod';
import styles from './{{FormName}}.module.css';

// ============================================================================
// Validation Schema
// ============================================================================

/**
 * Zod schema for form validation.
 */
export const {{formName}}Schema = z.object({
  // Example fields - customize as needed
  email: z
    .string()
    .min(1, 'Email is required')
    .email('Invalid email address'),
  password: z
    .string()
    .min(8, 'Password must be at least 8 characters')
    .regex(
      /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,
      'Password must contain uppercase, lowercase, and number'
    ),
  confirmPassword: z.string().min(1, 'Please confirm your password'),
  // Add more fields as needed
}).refine((data) => data.password === data.confirmPassword, {
  message: 'Passwords do not match',
  path: ['confirmPassword'],
});

/**
 * Inferred type from the Zod schema.
 */
export type {{FormName}}FormData = z.infer<typeof {{formName}}Schema>;

// ============================================================================
// Props
// ============================================================================

export interface {{FormName}}FormProps {
  /** Called when form is submitted with valid data */
  onSubmit: (data: {{FormName}}FormData) => void | Promise<void>;
  /** Called when form submission fails */
  onError?: (errors: unknown) => void;
  /** Initial form values */
  defaultValues?: Partial<{{FormName}}FormData>;
  /** Whether the form is submitting */
  isSubmitting?: boolean;
  /** Additional CSS class */
  className?: string;
}

// ============================================================================
// Component
// ============================================================================

/**
 * {{FormName}} form component with validation.
 *
 * @example
 * ```tsx
 * <{{FormName}}Form
 *   onSubmit={(data) => console.log(data)}
 *   defaultValues={{ email: 'user@example.com' }}
 * />
 * ```
 */
export const {{FormName}}Form: FC<{{FormName}}FormProps> = ({
  onSubmit,
  onError,
  defaultValues,
  isSubmitting = false,
  className,
}) => {
  const {
    register,
    handleSubmit,
    formState: { errors, isValid, isDirty },
    reset,
    watch,
  } = useForm<{{FormName}}FormData>({
    resolver: zodResolver({{formName}}Schema),
    defaultValues,
    mode: 'onBlur', // Validate on blur
  });

  const handleFormSubmit = async (data: {{FormName}}FormData) => {
    try {
      await onSubmit(data);
      reset(); // Reset form on successful submission
    } catch (error) {
      onError?.(error);
    }
  };

  return (
    <form
      className={`${styles.form} ${className ?? ''}`}
      onSubmit={handleSubmit(handleFormSubmit)}
      noValidate
      data-testid="{{formName}}-form"
      data-story="{{StoryId}}"
    >
      {/* Email Field */}
      <div className={styles.field}>
        <label htmlFor="email" className={styles.label}>
          Email
        </label>
        <input
          {...register('email')}
          id="email"
          type="email"
          className={`${styles.input} ${errors.email ? styles.inputError : ''}`}
          placeholder="you@example.com"
          aria-invalid={errors.email ? 'true' : 'false'}
          aria-describedby={errors.email ? 'email-error' : undefined}
          disabled={isSubmitting}
        />
        {errors.email && (
          <span id="email-error" className={styles.error} role="alert">
            {errors.email.message}
          </span>
        )}
      </div>

      {/* Password Field */}
      <div className={styles.field}>
        <label htmlFor="password" className={styles.label}>
          Password
        </label>
        <input
          {...register('password')}
          id="password"
          type="password"
          className={`${styles.input} ${errors.password ? styles.inputError : ''}`}
          placeholder="••••••••"
          aria-invalid={errors.password ? 'true' : 'false'}
          aria-describedby={errors.password ? 'password-error' : undefined}
          disabled={isSubmitting}
        />
        {errors.password && (
          <span id="password-error" className={styles.error} role="alert">
            {errors.password.message}
          </span>
        )}
      </div>

      {/* Confirm Password Field */}
      <div className={styles.field}>
        <label htmlFor="confirmPassword" className={styles.label}>
          Confirm Password
        </label>
        <input
          {...register('confirmPassword')}
          id="confirmPassword"
          type="password"
          className={`${styles.input} ${errors.confirmPassword ? styles.inputError : ''}`}
          placeholder="••••••••"
          aria-invalid={errors.confirmPassword ? 'true' : 'false'}
          aria-describedby={errors.confirmPassword ? 'confirmPassword-error' : undefined}
          disabled={isSubmitting}
        />
        {errors.confirmPassword && (
          <span id="confirmPassword-error" className={styles.error} role="alert">
            {errors.confirmPassword.message}
          </span>
        )}
      </div>

      {/* Submit Button */}
      <button
        type="submit"
        className={styles.submitButton}
        disabled={isSubmitting || (!isDirty && !isValid)}
      >
        {isSubmitting ? 'Submitting...' : 'Submit'}
      </button>
    </form>
  );
};

{{FormName}}Form.displayName = '{{FormName}}Form';

export default {{FormName}}Form;
